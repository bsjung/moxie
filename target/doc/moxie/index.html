<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `moxie` crate."><meta name="keywords" content="rust, rustlang, rust-lang, moxie"><title>moxie - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../dark.css"><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script src="../storage.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="shortcut icon" href="../favicon.ico"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../moxie/index.html'><div class='logo-container'><img src='../rust-logo.png' alt='logo'></div></a><p class='location'>Crate moxie</p><div class="sidebar-elems"><a id='all-types' href='all.html'><p>See all moxie's items</p></a><div class="block items"><ul><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#macros">Macros</a></li><li><a href="#structs">Structs</a></li></ul></div><p class='location'></p><script>window.sidebarCurrent = {name: 'moxie', ty: 'mod', relpath: '../'};</script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../theme.js"></script><nav class="sub"><form class="search-form js-only"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../settings.html"><img src="../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../src/moxie/lib.rs.html#1-79' title='goto source code'>[src]</a></span><span class='in-band'>Crate <a class="mod" href=''>moxie</a></span></h1><div class='docblock'><p>moxie aims to empower everyone to build reliable and efficient human interfaces. This crate
implements a lightweight &amp; platform-agnostic UI runtime which powers a declarative style for
creating interfaces and attempts to minimize latency and general overhead.</p>
<p>TODO simple snippet</p>
<h1 id="declarative-style" class="section-header"><a href="#declarative-style">Declarative style</a></h1>
<p>TODO &quot;imperative but idempotent&quot;</p>
<p>&quot;describe the UI <em>right now</em>&quot;</p>
<p>partition the render space using function calls</p>
<p>while managing persistent stateful elements</p>
<p>with minimal incremental updates</p>
<p>in order to achieve minimal latency and consistent responsiveness</p>
<h1 id="memoization" class="section-header"><a href="#memoization">Memoization</a></h1>
<p>Memoization is the core tool which moxie provides to store data across <code>Revision</code>s and to
minimize the incremental work performed when an update triggers the next <code>Revision</code>. Calls to
the memo_* topological functions will perform memoization specific to the current position
within the function call topology, as other topologically-nested functions do.</p>
<p>During [<code>run_once</code>] the memoization storage is an <a href="topo::Env">environment value</a>. Memoization
calls write to this storage to store results. At the end of <a href="crate::embed::Runtime::run_once">run_once</a>, this storage is
garbage-collected, dropping values which were not referenced, marking them as live.</p>
<p>Memoized values are dropped in a deterministic manner when replaced or no longer referenced,
modeling side-effectful lifecycle. Storing a type whose liveness represents the effect being
&quot;active&quot; allows us to perform the effect when creating the stored value and to undo the effect
when the stored value is <code>Drop</code>ped.</p>
<p>Initializing a memoized value at a particular callsite offers a simple API for incremental
computations. Further, placing mutations in the initializer for a memo variable offers a path
to minimizing the mutations or other side effects performed while describing the interface.</p>
<h1 id="state" class="section-header"><a href="#state">State</a></h1>
<p>TODO</p>
<h1 id="ui-runtime" class="section-header"><a href="#ui-runtime">UI Runtime</a></h1>
<p>A UI runtime is responsible for maintaining consistency between a program's desired output and
the rendered output over time. The desired output is expected to change over time as a result
of events from the &quot;outside world.&quot; This might be due to user input or events caused by
asynchronous tasks requested by a user.</p>
<p>The rendered output is usually modelled or expressed in terms of a visual or semantic hierarchy,
or a tree. The relationships between elements in the tree partition the space in which the
elements are rendered, subdividing it among their children. These relationships may or may
not be concretely encoded within data structures or they may purely be the result of some side
effects which occur in a particular order (e.g. mutating a display list for a GPU).</p>
<p>This process of performing the tasks to render the output is usually done in a loop, iterating
either once per fixed interval (e.g. 60 frames per second or every 16.67 milliseconds) or when
activated by the occurrence of events.</p>
</div><h2 id='reexports' class='section-header'><a href="#reexports">Re-exports</a></h2>
<table><tr><td><code>pub use <a class="mod" href="../topo/index.html" title="mod topo">topo</a>;</code></td></tr></table><h2 id='modules' class='section-header'><a href="#modules">Modules</a></h2>
<table><tr class='module-item'><td><a class="mod" href="embed/index.html" title='moxie::embed mod'>embed</a></td><td class='docblock-short'><p>Integration points for the moxie runtime. Generally not called directly by applications.</p>
</td></tr></table><h2 id='macros' class='section-header'><a href="#macros">Macros</a></h2>
<table><tr class='module-item'><td><a class="macro" href="macro.memo.html" title='moxie::memo macro'>memo</a></td><td class='docblock-short'><p>Memoizes <code>init</code> at this callsite, cloning a cached <code>Stored</code> if it exists and <code>Arg</code> is the same
as when the stored value was created.</p>
</td></tr><tr class='module-item'><td><a class="macro" href="macro.memo_state.html" title='moxie::memo_state macro'>memo_state</a></td><td class='docblock-short'><p>Root a state variable at this callsite, returning a [<code>Key</code>] to the state variable.
Re-initializes the state variable if the capture argument changes.</p>
</td></tr><tr class='module-item'><td><a class="macro" href="macro.memo_with.html" title='moxie::memo_with macro'>memo_with</a></td><td class='docblock-short'><p>Memoizes the provided function, caching the intermediate <code>Stored</code> value in memoization storage
and only re-initializing it if <code>Arg</code> has changed since the cached value was created. Regardless
of prior cached results, <code>with</code> is then called in to produce a return value.</p>
</td></tr><tr class='module-item'><td><a class="macro" href="macro.mox.html" title='moxie::mox macro'>mox</a></td><td class='docblock-short'><p>TODO figure out where this is actually documented</p>
</td></tr><tr class='module-item'><td><a class="macro" href="macro.once.html" title='moxie::once macro'>once</a></td><td class='docblock-short'><p>Runs the provided expression once per [<code>topo::Id</code>]. The provided value will always be cloned on
subsequent calls unless dropped from storage and reinitialized in a later <code>Revision</code>.</p>
</td></tr><tr class='module-item'><td><a class="macro" href="macro.once_with.html" title='moxie::once_with macro'>once_with</a></td><td class='docblock-short'><p>Memoizes <code>expr</code> once at the callsite. Runs <code>with</code> on every iteration.</p>
</td></tr><tr class='module-item'><td><a class="macro" href="macro.state.html" title='moxie::state macro'>state</a></td><td class='docblock-short'><p>Convenience wrapper around [<code>memo_state</code>].</p>
</td></tr></table><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table><tr class='module-item'><td><a class="struct" href="struct.Key.html" title='moxie::Key struct'>Key</a></td><td class='docblock-short'><p>A <code>Key</code> offers access to a state variable. The key allows reads of the state variable through
a snapshot taken when the <code>Key</code> was created. Writes are supported with [Key::update] and
[Key::set].</p>
</td></tr></table></section><section id="search" class="content hidden"></section><section class="footer"></section><aside id="help" class="hidden"><div><h1 class="hidden">Help</h1><div class="shortcuts"><h2>Keyboard Shortcuts</h2><dl><dt><kbd>?</kbd></dt><dd>Show this help dialog</dd><dt><kbd>S</kbd></dt><dd>Focus the search field</dd><dt><kbd>↑</kbd></dt><dd>Move up in search results</dd><dt><kbd>↓</kbd></dt><dd>Move down in search results</dd><dt><kbd>↹</kbd></dt><dd>Switch tab</dd><dt><kbd>&#9166;</kbd></dt><dd>Go to active search result</dd><dt><kbd>+</kbd></dt><dd>Expand all sections</dd><dt><kbd>-</kbd></dt><dd>Collapse all sections</dd></dl></div><div class="infos"><h2>Search Tricks</h2><p>Prefix searches with a type followed by a colon (e.g., <code>fn:</code>) to restrict the search to a given type.</p><p>Accepted types are: <code>fn</code>, <code>mod</code>, <code>struct</code>, <code>enum</code>, <code>trait</code>, <code>type</code>, <code>macro</code>, and <code>const</code>.</p><p>Search functions by type signature (e.g., <code>vec -> usize</code> or <code>* -> vec</code>)</p><p>Search multiple things at once by splitting your query with comma (e.g., <code>str,u8</code> or <code>String,struct:Vec,test</code>)</p></div></div></aside><script>window.rootPath = "../";window.currentCrate = "moxie";</script><script src="../aliases.js"></script><script src="../main.js"></script><script defer src="../search-index.js"></script></body></html>